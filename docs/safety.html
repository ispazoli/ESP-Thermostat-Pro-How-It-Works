<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ESP Thermostat Pro – How It Works</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="topbar">
    <div class="inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>ESP Thermostat Pro</h1>
          <div class="sub">How It Works • Docs</div>
        </div>
      </div>

     <nav class="nav" aria-label="Primary">
        <a href="index.html" data-i18n="nav_home">Overview</a>
        <a href="architecture.html" data-i18n="nav_arch">Architecture</a>
        <a href="ui.html" data-i18n="nav_ui">UI</a>
        <a href="control-logic.html" data-i18n="nav_logic">Control Logic</a>
        <a href="learning.html" data-i18n="nav_learn">Learning</a>
        <a href="diagnostics.html" data-i18n="nav_diag">Diagnostics</a>
        <a href="safety.html" data-i18n="nav_safety">Safety</a>
        <a href="energy.html" data-i18n="nav_energy">Gas & Energy</a>
        <a href="pages.html" data-i18n="nav_install">GitHub Pages</a>
      </nav>

      <div class="controls">
        <span class="badge" data-i18n="badge_static">Static Docs</span>
        <span class="badge" data-i18n="badge_dual">ESP32 + ESP-01</span>
        <button class="btn" id="langBtn" type="button">HU</button>
      </div>
    </div>
  </div>

  <main class="wrap">
    
<section class="hero">
  <h2 data-i18n="safety_h">Safety</h2>
  <p data-i18n="safety_p"></p>
</section>

<div class="card">
  <h3 data-i18n="safety_los_h">LoS steps</h3>
  <p data-i18n="safety_los_p"></p>
  <div class="figure" style="padding:14px;">
    
<svg viewBox="0 0 920 320" role="img" aria-label="LoS safety flow">
  <defs>
    <style>
      .b{fill:rgba(255,255,255,.04);stroke:rgba(255,255,255,.14);stroke-width:2;rx:16;ry:16}
      .t{fill:currentColor;font-family:ui-sans-serif,system-ui;font-size:16px}
      .m{fill:rgba(255,255,255,.65);font-family:ui-sans-serif,system-ui;font-size:13px}
      .a{stroke:rgba(255,255,255,.35);stroke-width:2;marker-end:url(#arrow)}
      .tag{fill:rgba(10,132,255,.12);stroke:rgba(10,132,255,.35);stroke-width:2}
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="rgba(255,255,255,.45)"/>
    </marker>
  </defs>

  <rect x="20" y="30" width="260" height="110" class="b"/>
  <text x="44" y="62" class="t" data-i18n="svg_step1">1) Soft timeout</text>
  <text x="44" y="88" class="m" data-i18n="svg_step1_sub1">Keep last valid temp</text>
  <text x="44" y="108" class="m" data-i18n="svg_step1_sub2">for a limited time</text>

  <line x1="280" y1="85" x2="340" y2="85" class="a"/>

  <rect x="340" y="30" width="260" height="110" class="b"/>
  <text x="364" y="62" class="t" data-i18n="svg_step2">2) Safe‑Heat cycle</text>
  <text x="364" y="88" class="m" data-i18n="svg_step2_sub1">Duty control (ON/OFF)</text>
  <text x="364" y="108" class="m" data-i18n="svg_step2_sub2">to avoid freeze risk</text>

  <line x1="600" y1="85" x2="660" y2="85" class="a"/>

  <rect x="660" y="30" width="240" height="110" class="b"/>
  <text x="684" y="62" class="t" data-i18n="svg_step3">3) Freeze target</text>
  <text x="684" y="88" class="m" data-i18n="svg_step3_sub1">Hold a safe minimum</text>
  <text x="684" y="108" class="m" data-i18n="svg_step3_sub2">temperature</text>

  <rect x="20" y="180" width="880" height="110" class="tag"/>
  <text x="44" y="214" class="t" data-i18n="svg_note_main">Always: predictable behavior + visible badge in UI</text>
  <text x="44" y="242" class="m" data-i18n="svg_note_sub">Goal: safe operation during sensor faults until repair. Not maximum heating.</text>
</svg>

    <div class="figcap">LoS fallback flow (static diagram)</div>
  </div>

  <div class="hr"></div>

  <h3 data-i18n="safety_why_h">Why</h3>
  <p data-i18n="safety_why_p"></p>

  <div class="two" style="margin-top:12px;">
    <div class="figure">
      <img src="assets/screenshots/System2.jpg" alt="Fallback configuration">
      <div class="figcap">Fallback configuration (Soft timeout / Safe‑Heat / Freeze target)</div>
    </div>
    <div class="figure">
      <img src="assets/screenshots/Diag&Health3.jpg" alt="Fallback badge / diagnostics">
      <div class="figcap">Diagnostics & badges (fallback visibility)</div>
    </div>
  </div>
</div>

<div class="page-nav">
  <a href="diagnostics.html" class="nav-card prev-link">
    <span class="nav-label" data-i18n="lbl_prev">Previous</span>
    <span class="nav-title">
      <span class="arrow">←</span> <span data-i18n="nav_diag">Diagnostics</span>
    </span>
  </a>
  <a href="energy.html" class="nav-card next-link">
    <span class="nav-label" data-i18n="lbl_next">Next</span>
    <span class="nav-title">
      <span data-i18n="nav_energy">Gas & Energy</span> <span class="arrow">→</span>
    </span>
  </a>
</div>

    <div class="footer" data-i18n="footer">
      Made for GitHub Pages. This site is documentation only; the live control UI runs on the ESP32.
    </div>
  </main>

  <script src="site.js"></script>
</body>
</html>